# P06 â€” Cloud-safe Contacts module (CRUD + filters + profile tabs + RBAC)

## Implementation notes
- Added in-memory contact service with CRUD, filtering, sorting, pagination, and role-aware note visibility.
- Implemented contacts API routes with workspace scoping and server-side RBAC enforcement.
- Built contacts list, create/edit form panel, and contact profile tabs that render empty states by default.
- Ensured read-only users cannot edit and assistants do not receive private notes by default.

## UX coverage
- `/contacts` list includes filters (tier, city, tags, trust score range, organization, community), sorting chips, pagination summary, and create/edit panel.
- `/contacts/[contactId]` profile view renders tabs for Overview, Timeline, Needs/Offers, Commitments, Graph, Communities.

## API surface
- `GET /api/contacts?workspaceId=...&tier=&city=&tags=tag1,tag2&trust_score_min=&trust_score_max=&organization=&community=&sort=last_interaction|trust_score|name&page=&per_page=`
- `POST /api/contacts` `{ workspaceId, name, city, tier, trustScore, introducedBy, aliases, tags, organizations, communities, channels, fieldVisibility, notes, lastInteractionAt }`
- `GET /api/contacts/[contactId]?workspaceId=...`
- `PUT /api/contacts/[contactId]` `{ workspaceId, ...fields }`
- `DELETE /api/contacts/[contactId]?workspaceId=...`

## RBAC rules
- Read-only members cannot create, update, or delete contacts.
- Assistants see public notes only unless elevated.

## Key files
- `lib/contacts.ts`
- `app/api/contacts/route.ts`
- `app/api/contacts/[contactId]/route.ts`
- `app/(app)/contacts/page.tsx`
- `app/(app)/contacts/[contactId]/page.tsx`
- `components/contacts/*`

## Local verification
See `LOCAL_VERIFICATION.md` for the full checklist and P06 commands.
