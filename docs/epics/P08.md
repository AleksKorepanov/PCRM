# P08 â€” Cloud-safe interactions timeline + follow-ups + permission-aware search

## Implementation notes
- Added in-memory interaction and follow-up stores with privacy-aware filtering, participant links, and organization/community metadata.
- Implemented CRUD API endpoints for interactions plus follow-up creation and updates.
- Delivered permission-aware search and contact-scoped timeline listing.
- Extended RBAC to cover interaction creation/editing.

## UX coverage
- Contact profile timeline tab renders interaction cards, participants, organizations/communities, links, and follow-ups.

## API surface
- `GET /api/interactions?workspaceId=...&contactId=...&q=...`
- `POST /api/interactions` `{ workspaceId, subject, interactionType, occurredAt, privacyLevel?, participants?, organizations?, communities?, links?, followup? }`
- `GET /api/interactions/:interactionId?workspaceId=...`
- `PUT /api/interactions/:interactionId` `{ workspaceId, ...updates }`
- `DELETE /api/interactions/:interactionId?workspaceId=...`
- `GET /api/interactions/:interactionId/followups?workspaceId=...`
- `POST /api/interactions/:interactionId/followups` `{ workspaceId, assignedToUserId?, dueAt?, status?, notes? }`
- `PUT /api/followups/:followupId` `{ workspaceId, assignedToUserId?, dueAt?, status?, notes? }`
- `DELETE /api/followups/:followupId?workspaceId=...`

## Privacy and RBAC
- Private interactions are hidden from assistants and read-only roles.
- Restricted interactions are limited to admins and owners.
- Read-only roles cannot create or edit interactions or follow-ups.

## Key files
- `lib/interactions.ts`
- `lib/relations.ts`
- `lib/rbac.ts`
- `app/api/interactions/route.ts`
- `app/api/interactions/[interactionId]/route.ts`
- `app/api/interactions/[interactionId]/followups/route.ts`
- `app/api/followups/[followupId]/route.ts`
- `components/contacts/contact-profile-tabs.tsx`
- `app/(app)/contacts/[contactId]/page.tsx`

## Local verification
See `LOCAL_VERIFICATION.md` for the full checklist and P08 commands.
