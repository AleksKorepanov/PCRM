# P04 — Cloud-safe application shell UI (layout + navigation + role-aware)

## Implementation notes
- Adds an authenticated shell layout with top bar workspace switcher, user menu, and left navigation.
- Introduces a centralized text layer to prepare UI copy for RU/EN localization with RU fallback.
- Implements role-aware navigation and action gating using shared RBAC helpers.
- Provides empty states and an error boundary for authenticated routes.

## Role-aware UI
- Navigation items require minimum roles; restricted items are disabled with a lock indicator.
- Settings are hidden for non-admin roles.
- Primary actions on each page are disabled when the role lacks permission (e.g., analytics requires admin).

## Key files
- `app/(app)/layout.tsx` — authenticated shell wrapper.
- `components/shell/app-shell.tsx` — top bar and left navigation.
- `components/shell/standard-page.tsx` — shared empty state layout for sections.
- `lib/text.ts` — centralized RU/EN text layer.
- `lib/rbac.ts` — extended UI permission helpers.

## Local verification
See `LOCAL_VERIFICATION.md` for the full checklist and P04 commands.
